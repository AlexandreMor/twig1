{% for product in products %}
        {% if loop.first %}
            <div class="row"> {# open row #}
        {% endif %}

            {{product }}

        {% if loop.index % 3 == 0 %}
            </div><div class="row">
        {% endif %}
        {% if loop.last %}
            </div> {# close last row #}
        {% endif %}
    {% endfor %}